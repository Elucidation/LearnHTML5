<!DOCTYPE html>
<html>
    <head>
        <title>Learning HTML5</title>

        <style>
            body {
                padding: 10px;
                text-align: center;
            }
            canvas {
                border: 1px solid;
                position: relative;
            }
        </style>
        <script type="text/javascript"> <!--
            var canvasContext;
            var stat;
            var px, py; // Points arrays
            function init() {
                var c = document.getElementById("argh");
                stat = document.getElementById("stat");
                
                // Initialize points array
                px = new Array();
                py = new Array();
                
                
                canvasContext = c.getContext("2d");
                canvasContext.strokeStyle = '#00f';
                canvasContext.lineWidth = "2";
            }
            function drawSomeRect() {
                canvasContext.fillRect(20,20,10,10);
            }
            function clearSomeRect() {
                canvasContext.clearRect(20,20,30,30);
            }
            
            function drawBox(x,y,w,h) {
                canvasContext.strokeRect(x,y,w,h);
            }
            
            function mouseClick(e)
            {
                var mouseX, mouseY;

                if(e.offsetX) {
                    mouseX = e.offsetX;
                    mouseY = e.offsetY;
                }
                else if(e.layerX) {
                    mouseX = e.layerX;
                    mouseY = e.layerY;
                }
                drawBox(mouseX,mouseY,30,50);
                px [px.length] = mouseX;
                py [py.length] = mouseY;
                
                stat.innerHTML = "Mouse Pos: "+mouseX +", " + mouseY + "<br>";
                stat.innerHTML += "Number of Points: "+ px.length + "<br>";
                for (i=0; i < px.length; i++) {
                    stat.innerHTML += "Point #"+i+": "+ px[i] + ", "+ py[i]+"<br>";
                }
                
            }            
            --></script>
    </head>
    <body onload="init();">
        <h1>So far so good.</h1>
        <p>
            <canvas id="argh"
                    width="600" 
                    height="300" 
                    onmouseover="drawSomeRect();"
                    onmouseout="clearSomeRect();"
                    onclick="mouseClick(event);">

            </canvas>
        </p>
        <div id="stat">aa</div>
        <script type="text/javascript"> <!--
            document.write("<p>" + Date() + "</p>");
            document.write("<p>Script appears to be functioning</p>");
            --></script>

    </body>
</html>
